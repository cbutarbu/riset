{"ast":null,"code":"'use strict';\n\nvar Helper = require('./helper.js');\n\nvar Geocoder = require('./geocoder.js');\n\nvar HttpAdapter = require('./httpadapter/httpadapter.js');\n\nvar HttpsAdapter = require('./httpadapter/httpsadapter.js');\n\nvar RequestAdapter = require('./httpadapter/requestadapter.js');\n\nvar GoogleGeocoder = require('./geocoder/googlegeocoder.js');\n\nvar HereGeocoder = require('./geocoder/heregeocoder.js');\n\nvar AGOLGeocoder = require('./geocoder/agolgeocoder.js');\n\nvar FreegeoipGeocoder = require('./geocoder/freegeoipgeocoder.js');\n\nvar DataScienceToolkitGeocoder = require('./geocoder/datasciencetoolkitgeocoder.js');\n\nvar OpenStreetMapGeocoder = require('./geocoder/openstreetmapgeocoder.js');\n\nvar PickPointGeocoder = require('./geocoder/pickpointgeocoder.js');\n\nvar LocationIQGeocoder = require('./geocoder/locationiqgeocoder.js');\n\nvar MapQuestGeocoder = require('./geocoder/mapquestgeocoder.js');\n\nvar MapzenGeocoder = require('./geocoder/mapzengeocoder.js');\n\nvar OpenMapQuestGeocoder = require('./geocoder/openmapquestgeocoder.js');\n\nvar YandexGeocoder = require('./geocoder/yandexgeocoder.js');\n\nvar GeocodioGeocoder = require('./geocoder/geocodiogeocoder.js');\n\nvar OpenCageGeocoder = require('./geocoder/opencagegeocoder.js');\n\nvar NominatimMapquestGeocoder = require('./geocoder/nominatimmapquestgeocoder.js');\n\nvar TomTomGeocoder = require('./geocoder/tomtomgeocoder.js');\n\nvar VirtualEarthGeocoder = require('./geocoder/virtualearth.js');\n\nvar SmartyStreets = require('./geocoder/smartystreetsgeocoder.js');\n\nvar TeleportGeocoder = require('./geocoder/teleportgeocoder.js');\n\nvar OpendataFranceGeocoder = require('./geocoder/opendatafrancegeocoder.js');\n/**\n* Geocoder Facotry\n*/\n\n\nvar GeocoderFactory = {\n  /**\n  * Return an http adapter by name\n  * @param  <string> adapterName adapter name\n  * @return <object>\n  */\n  _getHttpAdapter: function (adapterName, options) {\n    if (adapterName === 'http') {\n      return new HttpAdapter(null, options);\n    }\n\n    if (adapterName === 'https') {\n      return new HttpsAdapter(null, options);\n    }\n\n    if (adapterName === 'request') {\n      return new RequestAdapter(null, options);\n    }\n  },\n\n  /**\n  * Return a geocoder adapter by name\n  * @param  <string> adapterName adapter name\n  * @return <object>\n  */\n  _getGeocoder: function (geocoderName, adapter, extra) {\n    if (geocoderName === 'google') {\n      return new GoogleGeocoder(adapter, {\n        clientId: extra.clientId,\n        apiKey: extra.apiKey,\n        language: extra.language,\n        region: extra.region,\n        excludePartialMatches: extra.excludePartialMatches,\n        channel: extra.channel\n      });\n    }\n\n    if (geocoderName === 'here') {\n      return new HereGeocoder(adapter, {\n        appId: extra.appId,\n        appCode: extra.appCode,\n        language: extra.language,\n        politicalView: extra.politicalView,\n        country: extra.country,\n        state: extra.state\n      });\n    }\n\n    if (geocoderName === 'agol') {\n      return new AGOLGeocoder(adapter, {\n        client_id: extra.client_id,\n        client_secret: extra.client_secret\n      });\n    }\n\n    if (geocoderName === 'freegeoip') {\n      return new FreegeoipGeocoder(adapter);\n    }\n\n    if (geocoderName === 'datasciencetoolkit') {\n      return new DataScienceToolkitGeocoder(adapter, {\n        host: extra.host\n      });\n    }\n\n    if (geocoderName === 'openstreetmap') {\n      return new OpenStreetMapGeocoder(adapter, {\n        language: extra.language,\n        osmServer: extra.osmServer\n      });\n    }\n\n    if (geocoderName === 'pickpoint') {\n      return new PickPointGeocoder(adapter, {\n        language: extra.language,\n        apiKey: extra.apiKey\n      });\n    }\n\n    if (geocoderName === 'locationiq') {\n      return new LocationIQGeocoder(adapter, extra.apiKey);\n    }\n\n    if (geocoderName === 'mapquest') {\n      return new MapQuestGeocoder(adapter, extra.apiKey);\n    }\n\n    if (geocoderName === 'mapzen') {\n      return new MapzenGeocoder(adapter, extra.apiKey);\n    }\n\n    if (geocoderName === 'openmapquest') {\n      return new OpenMapQuestGeocoder(adapter, extra.apiKey);\n    }\n\n    if (geocoderName === 'yandex') {\n      return new YandexGeocoder(adapter, {\n        language: extra.language,\n        results: extra.results,\n        skip: extra.skip,\n        kind: extra.kind,\n        bbox: extra.bbox,\n        rspn: extra.rspn\n      });\n    }\n\n    if (geocoderName === 'geocodio') {\n      return new GeocodioGeocoder(adapter, extra.apiKey);\n    }\n\n    if (geocoderName === 'opencage') {\n      return new OpenCageGeocoder(adapter, extra.apiKey, extra);\n    }\n\n    if (geocoderName === 'nominatimmapquest') {\n      return new NominatimMapquestGeocoder(adapter, {\n        language: extra.language,\n        apiKey: extra.apiKey\n      });\n    }\n\n    if (geocoderName === 'tomtom') {\n      return new TomTomGeocoder(adapter, {\n        apiKey: extra.apiKey\n      });\n    }\n\n    if (geocoderName === 'virtualearth') {\n      return new VirtualEarthGeocoder(adapter, {\n        apiKey: extra.apiKey\n      });\n    }\n\n    if (geocoderName === 'smartystreets') {\n      return new SmartyStreets(adapter, extra.auth_id, extra.auth_token);\n    }\n\n    if (geocoderName === 'teleport') {\n      return new TeleportGeocoder(adapter, extra.apiKey, extra);\n    }\n\n    if (geocoderName === 'opendatafrance') {\n      return new OpendataFranceGeocoder(adapter);\n    }\n\n    throw new Error('No geocoder provider find for : ' + geocoderName);\n  },\n\n  /**\n  * Return an formatter adapter by name\n  * @param  <string> adapterName adapter name\n  * @return <object>\n  */\n  _getFormatter: function (formatterName, extra) {\n    if (formatterName === 'gpx') {\n      var GpxFormatter = require('./formatter/gpxformatter.js');\n\n      return new GpxFormatter();\n    }\n\n    if (formatterName === 'string') {\n      var StringFormatter = require('./formatter/stringformatter.js');\n\n      return new StringFormatter(extra.formatterPattern);\n    }\n  },\n\n  /**\n  * Return a geocoder\n  * @param  <string|object> geocoderAdapter Geocoder adapter name or adapter object\n  * @param  <string|object> httpAdapter     Http adapter name or adapter object\n  * @param  <array>         extra           Extra parameters array\n  * @return <object>\n  */\n  getGeocoder: function (geocoderAdapter, httpAdapter, extra) {\n    if (typeof geocoderAdapter === 'object') {\n      extra = geocoderAdapter;\n      geocoderAdapter = null;\n      httpAdapter = null;\n    }\n\n    if (!extra) {\n      extra = {};\n    }\n\n    if (extra.httpAdapter) {\n      httpAdapter = extra.httpAdapter;\n    }\n\n    if (extra.provider) {\n      geocoderAdapter = extra.provider;\n    }\n\n    if (!httpAdapter) {\n      httpAdapter = 'https';\n    }\n\n    if (!geocoderAdapter) {\n      geocoderAdapter = 'google';\n    }\n\n    if (Helper.isString(httpAdapter)) {\n      httpAdapter = this._getHttpAdapter(httpAdapter, extra);\n    }\n\n    if (Helper.isString(geocoderAdapter)) {\n      geocoderAdapter = this._getGeocoder(geocoderAdapter, httpAdapter, extra);\n    }\n\n    var formatter = extra.formatter;\n\n    if (Helper.isString(formatter)) {\n      formatter = this._getFormatter(formatter, extra);\n    }\n\n    return new Geocoder(geocoderAdapter, formatter);\n  }\n};\nmodule.exports = GeocoderFactory;","map":null,"metadata":{},"sourceType":"script"}